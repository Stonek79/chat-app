# Активный план доработок (Текущий Спринт)

**Процесс работы:** Этот документ содержит детальный план для *текущего* этапа. После завершения всех задач, мы обновляем `progress.md` и планируем следующий этап.

---

### **Текущий Этап: 6. Продвинутая функциональность сообщений (в процессе)**
**Цель:** Реализовать полноценное взаимодействие с сообщениями, включая ответы.

1.  **[ ] Реализация ответов на сообщения (Replies):**
    - **Действие:** Добавить `replyToId` в схему Prisma и API.
    - **Действие:** Реализовать UI для выбора сообщения для ответа и отображения цитаты.
    - **Действие:** Реализовать рендеринг ответов внутри `ChatMessage`.

2.  **[✅] Реализация редактирования сообщений:**
    - **Бэкенд:** Полностью реализован (`isEdited: true`, `updatedAt`).
    - **UI (Десктоп):** Реализовано.
    - **UI (Мобайл):** Требуется проверка и, возможно, реализация long-press.

3.  **[✅] Реализация необратимого удаления сообщений (Hard Delete):**
    - **Действие:** Полностью реализовано на бэкенде и фронтенде.

---

### **Этап 7: Управление жизненным циклом чатов (планируется)**
**Цель:** Дать пользователям возможность создавать, настраивать и удалять чаты.

1.  **[ ] Реализация создания чатов:**
    - **Действие:** Разработать UI (модальное окно) для создания приватных и групповых чатов.

2.  **[ ] Реализация редактирования чатов:**
    - **Действие:** Разработать UI для изменения названия и аватара группового чата.

3.  **[ ] Реализация удаления чатов:**
    - **Действие:** Разработать UI и логику подтверждения для удаления чата (доступно только `OWNER`).

---

## Ближайшие цели (Backlog на следующие спринты)

- **[ ] Этап 8: Реализация отправки медиа (Изображения/Видео):**
    - **Примечание:** Это крупная задача, требующая архитектурных решений для production-окружения (например, MinIO/S3). Текущая реализация для аватаров является временной.
    - **Действие (Архитектура):** Спроектировать и реализовать масштабируемое медиа-хранилище.
    - **Действие (Бэкенд):** Адаптировать API для приема `multipart/form-data`.
    - **Действие (UI/UX):** Реализовать UI для прикрепления и предпросмотра медиафайлов.

- **[ ] Этап 9: Push-уведомления**

---

## Долгосрочная перспектива (Future Goals)

- **[ ] Этап 10: Реакции на сообщения (Emoji)**
- **[ ] Этап 11: E2E-шифрование** 