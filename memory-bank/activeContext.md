# Активный план доработок (Текущий Спринт)

**Процесс работы:** Этот документ содержит детальный план для *текущего* этапа. После завершения всех задач, мы обновляем `progress.md` и планируем следующий этап.

---

### **Текущий Этап: 5. UI/UX и медиа**
**Цель:** Завершить рестайлинг интерфейса в стиле Telegram, сделать его полностью адаптивным и реализовать масштабируемую архитектуру для загрузки пользовательских медиафайлов (начиная с аватаров).

#### **Часть 1: Завершение рестайлинга и адаптивность (в процессе)**

1.  **[ ] Финальная стилизация компонентов:**
    - **Действие:** Проверить и доработать стили `Sidebar`, `ChatHeader`, `MessageBubble`, `MessageInput` в соответствии с референсами.

2.  **[ ] Группировка сообщений:**
    - **Действие:** Реализовать корректную визуальную группировку последовательных сообщений от одного пользователя.

3.  **[ ] Адаптивный layout:**
    - **Действие:** Обеспечить полное соответствие мобильного вида приложения предоставленным скриншотам. Адаптировать сетку и компоненты для корректного отображения на разных разрешениях экрана.

---

### **Часть 2: Инфраструктура для медиафайлов (планируется)**

4.  **[ ] Настройка Docker-сервисов:**
    - **Действие:** Добавить и настроить в `docker-compose.yml` сервисы для **MinIO** (S3-совместимое хранилище) и **Nginx** (в качестве прокси и кэширующего сервера для медиа).

5.  **[ ] Создание пакета для работы с медиа:**
    - **Действие:** Создать новый workspace-пакет `@chat-app/media-storage`, который инкапсулирует всю логику по работе с файлами (загрузка, удаление, получение URL).

---

### **Часть 3: Реализация загрузки аватаров (планируется)**

6.  **[ ] Оптимизация изображений:**
    - **Действие:** В пакете `@chat-app/media-storage` реализовать логику для оптимизации (изменение размера, сжатие) загружаемых изображений с помощью библиотеки `sharp`.

7.  **[ ] API-маршрут для загрузки:**
    - **Действие:** Создать `POST /api/user/avatar` для обработки загрузки аватара, его сохранения в MinIO и обновления `avatarUrl` у пользователя в БД.

8.  **[ ] Frontend-компонент `AvatarUpload`:**
    - **Действие:** Разработать UI-компонент, который позволяет пользователю выбрать файл, отображает превью и показывает процесс загрузки.

9.  **[ ] Интеграция с формой профиля:**
    - **Действие:** Встроить компонент `AvatarUpload` в страницу редактирования профиля пользователя.

## Ближайшие цели (после текущего фокуса)

- **[ ] Этап 6: Продвинутая функциональность сообщений** (редактирование, удаление, ответы)
- **[ ] Этап 7: Push-уведомления**
- **[ ] Этап 8: E2E-шифрование** 