/// Модель для отслеживания действий над сообщениями (удаление, редактирование).
/// Это позволяет вести журнал аудита и хранить историю изменений.
model MessageAction {
    id        String   @id @default(cuid())
    createdAt DateTime @default(now())

    /// Связь с сообщением, над которым было совершено действие.
    message   Message @relation(fields: [messageId], references: [id], onDelete: Cascade)
    messageId String

    /// Пользователь, который совершил действие (автор действия).
    actor   User   @relation(fields: [actorId], references: [id], onDelete: Cascade)
    actorId String

    /// Тип совершенного действия.
    type ActionType

    /// Новое содержимое сообщения. Используется только для действий типа 'EDITED'.
    /// Для 'DELETED' это поле будет null.
    newContent String?
}

/// Перечисление возможных типов действий над сообщением.
enum ActionType {
    /// Сообщение было удалено.
    DELETED
    /// Сообщение было отредактировано.
    EDITED
}
